+++
title = "ECMAScript6å…¥é—¨/PWAäº†è§£"
date = "2018-01-26"
author = "whidy"
+++
> 2018å¹´1æœˆ26æ—¥ é˜´ ä¸€èˆ¬

# ECMAScript6å…¥é—¨ / PWAäº†è§£

## ECMAScript 6 å…¥é—¨

> å¤ä¹ å‰å‡ å¤©å­¦ä¹ çš„åŸºç¡€, å¹¶ç»§ç»­å­¦ä¹ (è¯è¯´æ—©å°±è¯´å†çœ‹å‡½æ•°äº†, ç»“æœåˆç»•å›å‰é¢å‡ ç« èŠ‚äº†ğŸ˜‚)

### å˜é‡æå‡

è¿™ä¸ªä¸æ˜¯ç¬¬ä¸€æ¬¡è¯´äº†, ä½†æ˜¯ä¹‹å‰çœ‹çš„æ²¡é‚£ä¹ˆä»”ç»†, ä»Šå¤©å°ç»“å‡ ä¸ªå®¹æ˜“å¿˜è®°å’Œå¿½ç•¥çš„åœ°æ–¹.

å‡½æ•°ä½“å†…å¼•å…¥å¤–éƒ¨å˜é‡æ—¶, å³ä¾¿å‡½æ•°ä½“å†…**é‡å¤å£°æ˜å¤–éƒ¨å˜é‡**çš„ä»£ç çœ‹èµ·æ¥æ²¡æœ‰æ‰§è¡Œ, ä½†ä¾æ—§ä¼šè¢«æå‡. å¦‚ä¸‹ç¤ºä¾‹, å®¹æ˜“ä»¥ä¸º`false`å†…çš„ä»£ç å—ä¸æ‰§è¡Œ, åˆ™è¾“å‡ºæ—¥æœŸçš„é”™è¯¯.

```javascript
var tmp = new Date();

function f() {
  console.log(tmp);
  if (false) {
    var tmp = 'hello world';
  }
}

f(); // undefined
```

å¦å¤–ä¸€ä¸ªç±»ä¼¼çš„:

```javascript
var is_android = true;
if (is_android) {
  function foo() {
    console.log('I am Android');
  }
} else {
  function foo() {
    console.log('I am NOT Android');
  }
}
foo(); // ES5: 'I am NOT Android'
```

**æœ€å¥½ä¸è¦åœ¨ä»£ç å—ä¸­å£°æ˜å‡½æ•°å˜é‡**, ä¸Šé¢çš„ä»£ç è¢«è§£é‡Šä¸º:

```javascript
function foo() {
  alert('I am Android');
}
function foo() {
  alert('I am NOT Android');
}
var is_android;

is_android = true;
if (is_android) {

} else {

}
foo();
```

é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šç‰¹æ®Šçš„æƒ…å†µ, è¿™é‡Œä¸å¤šåšè¯´æ˜äº†, å¯ä»¥å‚é˜…:

* [Javascriptä½œç”¨åŸŸåŠå˜é‡æå‡](https://wordpress.youran.me/javascript-scoping-and-hoisting/)
* [StackOverflow: Need to understand Javascript function hoisting example](https://stackoverflow.com/questions/23125529/need-to-understand-javascript-function-hoisting-example)

æ‰€ä»¥è¯´, ç”¨`let`å°±å¯ä»¥å°½å¯èƒ½é¿å…è¿™äº›é—®é¢˜, æ…¢æ…¢æŠ›å¼ƒ`var`å§~

> **é¢˜å¤–è¯**
> åˆšæ‰é‚£æ®µ`is_android`çš„ä»£ç , åœ¨`node`ç¯å¢ƒä¸‹å’Œ`babel`ç¼–è¯‘ä¸‹åˆæœ‰æ‰€åŒºåˆ«, nodeä¸‹çš„ç»“æœå§‹ç»ˆæ˜¯è¾“å‡º`I am Android`, è€Œbabelä¸‹åˆ™æç¤ºé”™è¯¯, fooæœªå£°æ˜çš„å˜é‡.
>
> ä¸ªäººåˆ†æ: ä»£ç å—ä¸­å£°æ˜å˜é‡çš„æ“ä½œåœ¨es6ä¸­æ˜¯å±é™©çš„, es5åˆ™ä¼šå‘ç”Ÿå˜é‡æå‡?
>
> äº‹å®ä¸Š, ES6åœ¨ç«‹å³æ‰§è¡Œå‡½æ•°ä¸­å£°æ˜å‡½æ•°, ä¹Ÿæ˜¯æœ‰å˜é‡æå‡çš„, å¦‚ä¸‹ç¤ºä¾‹:
> ```javascript
> // æµè§ˆå™¨çš„ ES6 ç¯å¢ƒ
> function f() { console.log('I am outside!'); }
> (function () {
>   if (false) {
>     // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f
>     function f() { console.log('I am inside!'); }
>   }
> 
>   f();
> }());
> // Uncaught TypeError: f is not a function
> ```
> è¢«è§£é‡Šä¸º:
> ```javascript
> // æµè§ˆå™¨çš„ ES6 ç¯å¢ƒ
> function f() { console.log('I am outside!'); }
> (function () {
>   var f = undefined;
>   if (false) {
>     function f() { console.log('I am inside!'); }
>   }
> 
>   f();
> }());
> // Uncaught TypeError: f is not a function
> ```
> å‚é˜…: [ECMAScript 6 å…¥é—¨ - å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜](http://es6.ruanyifeng.com/?search=%E8%A7%A3%E6%9E%84&x=10&y=8#docs/let#%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E)
>
> å¦ä¸€ä¸ªç»“è®ºå¤§æ¦‚å°±æ˜¯, çš„ç¡®è¦å…»æˆå‡½æ•°è¡¨è¾¾å¼å¼ç¼–ç ä¹ æƒ¯.

### è§£æ„èµ‹å€¼

å…¶å®ç†è§£èµ·æ¥å¾ˆå®¹æ˜“, ä½†æ˜¯å¾ˆå®¹æ˜“å¿˜è®°. å°±éšä¾¿å†™å‡ ä¸ªä¾‹å­å§:

```javascript
function f() {
  console.log('aaa');
}

let [x = f()] = [1];
```

ç­‰åŒäº

```javascript
let x;
if ([1][0] === undefined) {
  x = f();
} else {
  x = [1][0];
}
```

> æ³¨æ„ï¼ŒES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆã€‚

```javascript
let x;
if ([1][0] === undefined) {
  x = f();
} else {
  x = [1][0];
}
```

```javascript
let {foo: {bar}} = {baz: 'baz'};
```

è¿™æ®µä¼šæŠ¥é”™, ä»åŸæ–‡ä¸­çš„è§£é‡Š, ç®€å•æ¥è¯´, `foo`æ˜¯`undefined`, é‚£ä¹ˆå®ƒçš„å­å¯¹è±¡è·å–å°±ä¼šæŠ¥é”™.

> ç”±æ­¤, æˆ‘æ¨æµ‹ä¸€ä¸ªå¯èƒ½æ­£ç¡®çš„ç»“è®º, è§£æ„èµ‹å€¼, ä»ç­‰å·å³è¾¹å¯¹åº”å·¦è¾¹æ¥çœ‹, æ²¡æœ‰å¯¹åº”åˆ°å·¦è¾¹çš„, é‚£å°±æ˜¯`undefined`, å¯¹åº”ä¸Šå»åå†è¿›ä¸€æ­¥å¯¹åº”, ä¸Šé¢æ•°ç»„çš„ä¾‹å­, è¯æ˜äº†`1`å±äºæ­£ç¡®çš„å€¼, å¿…ç„¶ä¼šè¦†ç›–`f()`, è€Œå¯¹è±¡éœ€è¦ä¿æŒç»“æ„ä¸€è‡´, å¦åˆ™ä¹Ÿä¼šæŠ¥é”™.

## äº†è§£PWA(Progressive Web Apps)

> 2016å¹´è°·æ­Œæå‡ºPWA, ä½†å®é™…ä¸Šæ›´æ—©å°±æœ‰ç›¸å…³çš„æ¡ˆä¾‹äº†?

* [çŸ¥ä¹: å¦‚ä½•çœ‹å¾… Progressive Web Apps çš„å‘å±•å‰æ™¯ï¼Ÿ](https://www.zhihu.com/question/46690207)
* [CSND: ä¸‹ä¸€ä»£ Web åº”ç”¨æ¨¡å‹ - Progressive Web App](http://geek.csdn.net/news/detail/135595)

å¯¹äºæœªå°è¯•è¿‡Hybridå¼€å‘çš„æˆ‘, æ˜¯å¦å¯ä»¥è·³è¿‡ç›´æ¥å…³æ³¨PWAå¼€å‘, å½“ç„¶è¿™é‡Œé¢è¿˜æœ‰ä¸€ä¸ªè¦ç‚¹éœ€è¦å»äº†è§£**Service Worker**. 

## Vueé¡¹ç›®çš„vwç§»åŠ¨ç«¯é€‚é…

ä¸‹åˆæ­£å¥½æœ‰ä¸ªåŒäº‹å‘äº†ä¸€ç¯‡[å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨vwå®ç°ç§»åŠ¨ç«¯é€‚é…](https://www.w3cplus.com/mobile/vw-layout-in-vue.html), è™½ç„¶ä¸æ€ä¹ˆä¼šç”¨Vue, ä¸è¿‡ç²—ç•¥çœ‹äº†ä¸‹, å…³äºé€‚é…æ–¹æ¡ˆå’Œä¹‹å‰æˆ‘å†™çš„[DEMO](https://github.com/whidy/mobileweb/tree/postcss-px-to-viewport-test)æœ‰ç›¸ä¼¼ä¹‹å¤„, ä¸è¿‡ä»–çš„æ–‡ç« ä¸­æåˆ°äº†äº†ä¸€æ®µ:

> æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯ä½¿ç”¨viewportçš„polyfillï¼š[Viewport Units Buggyfill](https://github.com/rodneyrehm/viewport-units-buggyfill)ã€‚

æœ‰ç©ºæ¥ç ”ç©¶ä¸‹~
